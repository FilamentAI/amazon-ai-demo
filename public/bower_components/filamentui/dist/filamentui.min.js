function twClickOutside(c,l){return{link:function(t,e,a){if(a.twClickOutside){var i;a.ignoreIf&&(i=l(a.ignoreIf));var n=e[0],r=l(a.twClickOutside),o=function(e){n===e.target||n.contains(e.target)||i&&i(t)||t.$apply(r)};c.addEventListener("click",o,!0),t.$on("$destroy",function(e){c.removeEventListener("click",o)})}}}}twClickOutside.$inject=["$window","$parse"],angular.module("tw.directives.clickOutside",[]).directive("twClickOutside",twClickOutside),function(){var k="__default";angular.module("angularUtils.directives.dirPagination",[]).directive("dirPaginate",["$compile","$parse","paginationService",function(h,v,b){return{terminal:!0,multiElement:!0,priority:100,compile:function(e,t){var f=t.dirPaginate,a=f.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),i=/\|\s*itemsPerPage\s*:\s*(.*\(\s*\w*\)|([^\)]*?(?=\s+as\s+))|[^\)]*)/;if(null===a[2].match(i))throw"pagination directive: the 'itemsPerPage' filter must be set.";var n=a[2].replace(i,""),g=v(n);r=e,angular.forEach(r,function(e){1===e.nodeType&&angular.element(e).attr("dir-paginate-no-compile",!0)});var r;var o=t.paginationId||k;return b.registerInstance(o),function(e,t,a){var i=v(a.paginationId)(e)||a.paginationId||k;b.registerInstance(i);var n,r,o,c,l,s,u,d=(s=i,u=!!(l=f).match(/(\|\s*itemsPerPage\s*:[^|]*:[^|]*)/),s===k||u?l:l.replace(/(\|\s*itemsPerPage\s*:\s*[^|\s]*)/,"$1 : '"+s+"'"));r=a,o=d,(n=t)[0].hasAttribute("dir-paginate-start")||n[0].hasAttribute("data-dir-paginate-start")?(r.$set("ngRepeatStart",o),n.eq(n.length-1).attr("ng-repeat-end",!0)):r.$set("ngRepeat",o),c=t,angular.forEach(c,function(e){1===e.nodeType&&angular.element(e).removeAttr("dir-paginate-no-compile")}),c.eq(0).removeAttr("dir-paginate-start").removeAttr("dir-paginate").removeAttr("data-dir-paginate-start").removeAttr("data-dir-paginate"),c.eq(c.length-1).removeAttr("dir-paginate-end").removeAttr("data-dir-paginate-end");var p=h(t),m=function(e,t,a){var i;if(t.currentPage)i=v(t.currentPage);else{var n=(a+"__currentPage").replace(/\W/g,"_");e[n]=1,i=v(n)}return i}(e,a,i);b.setCurrentPageParser(i,m,e),void 0!==a.totalItems?(b.setAsyncModeTrue(i),e.$watch(function(){return v(a.totalItems)(e)},function(e){0<=e&&b.setCollectionLength(i,e)})):(b.setAsyncModeFalse(i),e.$watchCollection(function(){return g(e)},function(e){if(e){var t=e instanceof Array?e.length:Object.keys(e).length;b.setCollectionLength(i,t)}})),p(e)}}}}]).directive("dirPaginateNoCompile",function(){return{priority:5e3,terminal:!0}}).directive("dirPaginationControls",["paginationService","paginationTemplate",function(d,a){var p=/^\d+$/,e={restrict:"AE",scope:{maxSize:"=?",onPageChange:"&?",paginationId:"=?",autoHide:"=?"},link:function(i,e,t){var a=t.paginationId||k,n=i.paginationId||t.paginationId||k;if(!d.isRegistered(n)&&!d.isRegistered(a)){var r=n!==k?" (id: "+n+") ":" ";window.console&&console.warn("Pagination directive: the pagination controls"+r+"cannot be used without the corresponding pagination directive, which was not found at link time.")}i.maxSize||(i.maxSize=9);i.autoHide=void 0===i.autoHide||i.autoHide,i.directionLinks=!angular.isDefined(t.directionLinks)||i.$parent.$eval(t.directionLinks),i.boundaryLinks=!!angular.isDefined(t.boundaryLinks)&&i.$parent.$eval(t.boundaryLinks);var o=Math.max(i.maxSize,5);function c(e){if(d.isRegistered(n)&&u(e)){var t=i.pagination.current;i.pages=m(e,d.getCollectionLength(n),d.getItemsPerPage(n),o),i.pagination.current=e,s(),i.onPageChange&&i.onPageChange({newPageNumber:e,oldPageNumber:t})}}function l(){if(d.isRegistered(n)){var e=parseInt(d.getCurrentPage(n))||1;i.pages=m(e,d.getCollectionLength(n),d.getItemsPerPage(n),o),i.pagination.current=e,i.pagination.last=i.pages[i.pages.length-1],i.pagination.last<i.pagination.current?i.setCurrent(i.pagination.last):s()}}function s(){if(d.isRegistered(n)){var e=d.getCurrentPage(n),t=d.getItemsPerPage(n),a=d.getCollectionLength(n);i.range.lower=(e-1)*t+1,i.range.upper=Math.min(e*t,a),i.range.total=a}}function u(e){return p.test(e)&&0<e&&e<=i.pagination.last}i.pages=[],i.pagination={last:1,current:1},i.range={lower:1,upper:1,total:1},i.$watch("maxSize",function(e){e&&(o=Math.max(i.maxSize,5),l())}),i.$watch(function(){if(d.isRegistered(n))return(d.getCollectionLength(n)+1)*d.getItemsPerPage(n)},function(e){0<e&&l()}),i.$watch(function(){if(d.isRegistered(n))return d.getItemsPerPage(n)},function(e,t){e!=t&&void 0!==t&&c(i.pagination.current)}),i.$watch(function(){if(d.isRegistered(n))return d.getCurrentPage(n)},function(e,t){e!=t&&c(e)}),i.setCurrent=function(e){d.isRegistered(n)&&u(e)&&(e=parseInt(e,10),d.setCurrentPage(n,e))},i.tracker=function(e,t){return e+"_"+t}}},t=a.getString();void 0!==t?e.template=t:e.templateUrl=function(e,t){return t.templateUrl||a.getPath()};return e;function m(e,t,a,i){var n,r=[],o=Math.ceil(t/a),c=Math.ceil(i/2);n=e<=c?"start":o-c<e?"end":"middle";for(var l=i<o,s=1;s<=o&&s<=i;){var u=f(s,e,i,o),d=2===s&&("middle"===n||"end"===n),p=s===i-1&&("middle"===n||"start"===n);l&&(d||p)?r.push("..."):r.push(u),s++}return r}function f(e,t,a,i){var n=Math.ceil(a/2);return e===a?i:1===e?e:a<i?i-n<t?i-a+e:n<t?t-n+e:e:e}}]).filter("itemsPerPage",["paginationService",function(o){return function(t,e,a){if(void 0===a&&(a=k),!o.isRegistered(a))throw"pagination directive: the itemsPerPage id argument (id: "+a+") does not match a registered pagination-id.";var i,n;if(angular.isObject(t)){if(e=parseInt(e)||9999999999,n=o.isAsyncMode(a)?0:(o.getCurrentPage(a)-1)*e,i=n+e,o.setItemsPerPage(a,e),t instanceof Array)return t.slice(n,i);var r={};return angular.forEach(function(e){{if(Object.keys)return Object.keys(e);var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(a);return t}}(t).slice(n,i),function(e){r[e]=t[e]}),r}return t}}]).service("paginationService",function(){var t,i={};this.registerInstance=function(e){void 0===i[e]&&(i[e]={asyncMode:!1},t=e)},this.deregisterInstance=function(e){delete i[e]},this.isRegistered=function(e){return void 0!==i[e]},this.getLastInstanceId=function(){return t},this.setCurrentPageParser=function(e,t,a){i[e].currentPageParser=t,i[e].context=a},this.setCurrentPage=function(e,t){i[e].currentPageParser.assign(i[e].context,t)},this.getCurrentPage=function(e){var t=i[e].currentPageParser;return t?t(i[e].context):1},this.setItemsPerPage=function(e,t){i[e].itemsPerPage=t},this.getItemsPerPage=function(e){return i[e].itemsPerPage},this.setCollectionLength=function(e,t){i[e].collectionLength=t},this.getCollectionLength=function(e){return i[e].collectionLength},this.setAsyncModeTrue=function(e){i[e].asyncMode=!0},this.setAsyncModeFalse=function(e){i[e].asyncMode=!1},this.isAsyncMode=function(e){return i[e].asyncMode}}).provider("paginationTemplate",function(){var t,a="angularUtils.directives.dirPagination.template";this.setPath=function(e){a=e},this.setString=function(e){t=e},this.$get=function(){return{getPath:function(){return a},getString:function(){return t}}}}).run(["$templateCache",function(e){e.put("angularUtils.directives.dirPagination.template",'<ul class="pagination" ng-if="1 < pages.length || !autoHide"><li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(1)">&laquo;</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(pagination.current - 1)">&lsaquo;</a></li><li ng-repeat="pageNumber in pages track by tracker(pageNumber, $index)" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == \'...\' || ( ! autoHide && pages.length === 1 ) }"><a href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.current + 1)">&rsaquo;</a></li><li ng-if="boundaryLinks"  ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.last)">&raquo;</a></li></ul>')}])}(),function(E,e){"use strict";var O=function(){if(e.userAgent&&(e.userAgent.match(/Android/i)||e.userAgent.match(/webOS/i)||e.userAgent.match(/iPhone/i)||e.userAgent.match(/iPad/i)||e.userAgent.match(/iPod/i)||e.userAgent.match(/BlackBerry/i)||e.userAgent.match(/Windows Phone/i)))return!0}(),Y=function(e,t,a){var i,n,r=['<div class="_720kb-datepicker-calendar {{datepickerClass}} {{datepickerID}}" ng-class="{\'_720kb-datepicker-forced-to-open\': checkVisibility()}" ng-blur="hideCalendar()">',"</div>"],o=(i=e,n=t,a&&(O=!1),O?['<div class="_720kb-datepicker-calendar-header">','<div class="_720kb-datepicker-calendar-header-middle _720kb-datepicker-mobile-item _720kb-datepicker-calendar-month">','<select ng-model="month" title="{{ dateMonthTitle }}" ng-change="selectedMonthHandle(month)">','<option ng-repeat="item in months" ng-selected="item === month" ng-disabled=\'!isSelectableMaxDate(item + " " + day + ", " + year) || !isSelectableMinDate(item + " " + day + ", " + year)\' ng-value="$index + 1" value="$index + 1">',"{{ item }}","</option>","</select>","</div>","</div>",'<div class="_720kb-datepicker-calendar-header">','<div class="_720kb-datepicker-calendar-header-middle _720kb-datepicker-mobile-item _720kb-datepicker-calendar-month">','<select ng-model="mobileYear" title="{{ dateYearTitle }}" ng-change="setNewYear(mobileYear)">','<option ng-repeat="item in paginationYears track by $index" ng-selected="year === item" ng-disabled="!isSelectableMinYear(item) || !isSelectableMaxYear(item)" ng-value="item" value="item">',"{{ item }}","</option>","</select>","</div>","</div>"]:['<div class="_720kb-datepicker-calendar-header">','<div class="_720kb-datepicker-calendar-header-left">','<a class="_720kb-datepicker-calendar-month-button" href="javascript:void(0)" ng-class="{\'_720kb-datepicker-item-hidden\': !willPrevMonthBeSelectable()}" ng-click="prevMonth()" title="{{ buttonPrevTitle }}">',i,"</a>","</div>",'<div class="_720kb-datepicker-calendar-header-middle _720kb-datepicker-calendar-month">',"{{month}}&nbsp;",'<a href="javascript:void(0)" ng-click="paginateYears(year); showYearsPagination = !showYearsPagination;">',"<span>","{{year}}","<i ng-class=\"{'_720kb-datepicker-calendar-header-closed-pagination': !showYearsPagination, '_720kb-datepicker-calendar-header-opened-pagination': showYearsPagination}\"></i>","</span>","</a>","</div>",'<div class="_720kb-datepicker-calendar-header-right">','<a class="_720kb-datepicker-calendar-month-button" ng-class="{\'_720kb-datepicker-item-hidden\': !willNextMonthBeSelectable()}" href="javascript:void(0)" ng-click="nextMonth()" title="{{ buttonNextTitle }}">',n,"</a>","</div>","</div>"]),c=['<div class="_720kb-datepicker-calendar-header" ng-show="showYearsPagination">','<div class="_720kb-datepicker-calendar-years-pagination">','<a ng-class="{\'_720kb-datepicker-active\': y === year, \'_720kb-datepicker-disabled\': !isSelectableMaxYear(y) || !isSelectableMinYear(y)}" href="javascript:void(0)" ng-click="setNewYear(y)" ng-repeat="y in paginationYears track by $index">',"{{y}}","</a>","</div>",'<div class="_720kb-datepicker-calendar-years-pagination-pages">','<a href="javascript:void(0)" ng-click="paginateYears(paginationYears[0])" ng-class="{\'_720kb-datepicker-item-hidden\': paginationYearsPrevDisabled}">',e,"</a>",'<a href="javascript:void(0)" ng-click="paginateYears(paginationYears[paginationYears.length -1 ])" ng-class="{\'_720kb-datepicker-item-hidden\': paginationYearsNextDisabled}">',t,"</a>","</div>","</div>"],l=['<div class="_720kb-datepicker-calendar-days-header">','<div ng-repeat="d in daysInString">',"{{d}}","</div>","</div>"],s=['<div class="_720kb-datepicker-calendar-body">','<a href="javascript:void(0)" ng-repeat="px in prevMonthDays" class="_720kb-datepicker-calendar-day _720kb-datepicker-disabled">',"{{px}}","</a>","<a href=\"javascript:void(0)\" ng-repeat=\"item in days\" ng-click=\"setDatepickerDay(item)\" ng-class=\"{'_720kb-datepicker-active': selectedDay === item && selectedMonth === monthNumber && selectedYear === year, '_720kb-datepicker-disabled': !isSelectableMinDate(year + '/' + monthNumber + '/' + item ) || !isSelectableMaxDate(year + '/' + monthNumber + '/' + item) || !isSelectableDate(monthNumber, year, item)}\" class=\"_720kb-datepicker-calendar-day\">","{{item}}","</a>",'<a href="javascript:void(0)" ng-repeat="nx in nextMonthDays" class="_720kb-datepicker-calendar-day _720kb-datepicker-disabled">',"{{nx}}","</a>","</div>"],u=function(e){r.splice(r.length-1,0,e)};return o.forEach(u),c.forEach(u),l.forEach(u),s.forEach(u),r.join("")};E.module("720kb.datepicker",[]).directive("datepicker",["$window","$compile","$locale","$filter","$interpolate","$timeout",function(C,$,I,T,L,A){return{restrict:"AEC",scope:{dateSet:"@",dateMinLimit:"@",dateMaxLimit:"@",dateMonthTitle:"@",dateYearTitle:"@",buttonNextTitle:"@",buttonPrevTitle:"@",dateDisabledDates:"@",dateSetHidden:"@",dateTyper:"@",dateWeekStartDay:"@",datepickerAppendTo:"@",datepickerToggle:"@",datepickerClass:"@",datepickerShow:"@"},link:function(p,e,t){var a,i,n,r=t.selector,o=E.element(r?e[0].querySelector("."+r):e[0].children[0]),c=t.buttonPrev||'<b class="_720kb-datepicker-default-button">&lang;</b>',l=t.buttonNext||'<b class="_720kb-datepicker-default-button">&rang;</b>',s=t.dateFormat,u=p.$eval(p.dateDisabledDates),d=new Date,m=!1,f=!1,g=void 0!==t.datepickerMobile&&"false"!==t.datepickerMobile,h=I.DATETIME_FORMATS,v=Y(c,l,g),b=function(){m||f||!a||p.hideCalendar()},k=function(e,t){var a,i,n,r,o,c=new Date(t,e,0).getDate(),l=new Date(t+"/"+e+"/1").getDay(),s=new Date(t+"/"+e+"/"+c).getDay(),u=[],d=[];for(p.days=[],p.dateWeekStartDay=p.validateWeekDay(p.dateWeekStartDay),o=(p.dateWeekStartDay+6)%7,a=1;a<=c;a+=1)p.days.push(a);if(l===p.dateWeekStartDay)p.prevMonthDays=[];else{for(n=l-p.dateWeekStartDay,l<p.dateWeekStartDay&&(n+=7),r=1===Number(e)?12:e-1,a=1;a<=new Date(t,r,0).getDate();a+=1)u.push(a);p.prevMonthDays=u.slice(-n)}if(s===o)p.nextMonthDays=[];else{for(i=6-s+p.dateWeekStartDay,s<p.dateWeekStartDay&&(i-=7),a=1;a<=i;a+=1)d.push(a);p.nextMonthDays=d}},y=function(){p.month=T("date")(new Date(p.dateMinLimit),"MMMM"),p.monthNumber=Number(T("date")(new Date(p.dateMinLimit),"MM")),p.day=Number(T("date")(new Date(p.dateMinLimit),"dd")),p.year=Number(T("date")(new Date(p.dateMinLimit),"yyyy")),k(p.monthNumber,p.year)},w=function(){p.month=T("date")(new Date(p.dateMaxLimit),"MMMM"),p.monthNumber=Number(T("date")(new Date(p.dateMaxLimit),"MM")),p.day=Number(T("date")(new Date(p.dateMaxLimit),"dd")),p.year=Number(T("date")(new Date(p.dateMaxLimit),"yyyy")),k(p.monthNumber,p.year)},_=function(){if(!p.isSelectableMinDate(p.year+"/"+p.monthNumber+"/"+p.day)||!p.isSelectableMaxDate(p.year+"/"+p.monthNumber+"/"+p.day))return!1;var e=new Date(p.year+"/"+p.monthNumber+"/"+p.day);t.dateFormat?o.val(T("date")(e,s)):o.val(e),o.triggerHandler("input"),o.triggerHandler("change")},M=function(e,t){var a;-1<e.className.indexOf(t)||((a=e.className.split(" ")).push(t),e.className=a.join(" "))},P=function(e,t){var a,i;if(-1!==e.className.indexOf(t)){for(i=e.className.split(" "),a=0;a<i.length;a+=1)if(i[a]===t){i=i.slice(0,a).concat(i.slice(a+1));break}e.className=i.join(" ")}},S=p.$watch("dateSet",function(e){e&&(d=new Date(e),p.month=T("date")(d,"MMMM"),p.monthNumber=Number(T("date")(d,"MM")),p.day=Number(T("date")(d,"dd")),p.year=Number(T("date")(d,"yyyy")),k(p.monthNumber,p.year),"true"!==p.dateSetHidden&&_())}),D=p.$watch("dateMinLimit",function(e){e&&y()}),N=p.$watch("dateMaxLimit",function(e){e&&w()}),x=p.$watch("dateFormat",function(e){e&&_()});for(p.nextMonth=function(){12===p.monthNumber?(p.monthNumber=1,p.year=Number(p.year)+1):p.monthNumber+=1,p.dateMaxLimit&&(p.isSelectableMaxDate(p.year+"/"+p.monthNumber+"/"+p.days[0])||w()),p.month=T("date")(new Date(p.year,p.monthNumber-1),"MMMM"),k(p.monthNumber,p.year),p.day=void 0},p.willPrevMonthBeSelectable=function(){var e=p.monthNumber,t=p.year,a=T("date")(new Date(new Date(t+"/"+e+"/01").getTime()-864e5),"dd");return 1===e?(e=12,t-=1):e-=1,!(p.dateMinLimit&&!p.isSelectableMinDate(t+"/"+e+"/"+a))},p.willNextMonthBeSelectable=function(){var e=p.monthNumber,t=p.year;return 12===e?t+=e=1:e+=1,!(p.dateMaxLimit&&!p.isSelectableMaxDate(t+"/"+e+"/01"))},p.prevMonth=function(){1===p.monthNumber?(p.monthNumber=12,p.year=Number(p.year)-1):p.monthNumber-=1,p.dateMinLimit&&(p.isSelectableMinDate(p.year+"/"+p.monthNumber+"/"+p.days[p.days.length-1])||y()),p.month=T("date")(new Date(p.year,p.monthNumber-1),"MMMM"),k(p.monthNumber,p.year),p.day=void 0},p.selectedMonthHandle=function(e){p.monthNumber=Number(T("date")(new Date(e+"/01/2000"),"MM")),k(p.monthNumber,p.year),_()},p.setNewYear=function(e){if(O||(p.day=void 0),p.dateMaxLimit&&p.year<Number(e)){if(!p.isSelectableMaxYear(e))return}else if(p.dateMinLimit&&p.year>Number(e)&&!p.isSelectableMinYear(e))return;p.paginateYears(e),p.showYearsPagination=!1,A(function(){p.year=Number(e),k(p.monthNumber,p.year)},0)},p.hideCalendar=function(){a.classList?a.classList.remove("_720kb-datepicker-open"):P(a,"_720kb-datepicker-open")},p.setDatepickerDay=function(e){p.isSelectableDate(p.monthNumber,p.year,e)&&p.isSelectableMaxDate(p.year+"/"+p.monthNumber+"/"+e)&&p.isSelectableMinDate(p.year+"/"+p.monthNumber+"/"+e)&&(p.day=Number(e),p.selectedDay=p.day,p.selectedMonth=p.monthNumber,p.selectedYear=p.year,_(),t.hasOwnProperty("dateRefocus")&&o[0].focus(),p.hideCalendar())},p.paginateYears=function(e){var t,a=[],i=10,n=10;for(p.paginationYears=[],O&&(n=i=50,p.dateMinLimit&&p.dateMaxLimit&&(i=(e=new Date(p.dateMaxLimit).getFullYear())-new Date(p.dateMinLimit).getFullYear(),n=1)),t=i;0<t;t-=1)a.push(Number(e)-t);for(t=0;t<n;t+=1)a.push(Number(e)+t);"true"===p.dateTyper&&o.on("keyup blur",function(){if(o[0].value&&o[0].value.length&&0<o[0].value.length)try{(d=s?new Date(T("date")(o[0].value.toString(),s)):new Date(o[0].value.toString())).getFullYear()&&!isNaN(d.getDay())&&!isNaN(d.getMonth())&&p.isSelectableDate(d)&&p.isSelectableMaxDate(d)&&p.isSelectableMinDate(d)&&p.$apply(function(){p.month=T("date")(d,"MMMM"),p.monthNumber=Number(T("date")(d,"MM")),p.day=Number(T("date")(d,"dd")),4===d.getFullYear().toString().length&&(p.year=Number(T("date")(d,"yyyy"))),k(p.monthNumber,p.year)})}catch(e){return e}}),p.dateMaxLimit&&a&&a.length&&!p.isSelectableMaxYear(Number(a[a.length-1])+1)?p.paginationYearsNextDisabled=!0:p.paginationYearsNextDisabled=!1,p.dateMinLimit&&a&&a.length&&!p.isSelectableMinYear(Number(a[0])-1)?p.paginationYearsPrevDisabled=!0:p.paginationYearsPrevDisabled=!1,p.paginationYears=a},p.isSelectableDate=function(e,t,a){var i=0;if(u&&0<u.length)for(;i<=u.length;i+=1)if(new Date(u[i]).getTime()===new Date(e+"/"+a+"/"+t).getTime())return!1;return!0},p.isSelectableMinDate=function(e){return!(p.dateMinLimit&&new Date(p.dateMinLimit)&&new Date(e).getTime()<new Date(p.dateMinLimit).getTime())},p.isSelectableMaxDate=function(e){return!(p.dateMaxLimit&&new Date(p.dateMaxLimit)&&new Date(e).getTime()>new Date(p.dateMaxLimit).getTime())},p.isSelectableMaxYear=function(e){return!(p.dateMaxLimit&&e>new Date(p.dateMaxLimit).getFullYear())},p.isSelectableMinYear=function(e){return!(p.dateMinLimit&&e<new Date(p.dateMinLimit).getFullYear())},p.validateWeekDay=function(e){var t=Number(e,10);return(!t||t<0||6<t)&&(t=0),t},v=v.replace(/{{/g,L.startSymbol()).replace(/}}/g,L.endSymbol()),p.dateMonthTitle=p.dateMonthTitle||"Select month",p.dateYearTitle=p.dateYearTitle||"Select year",p.buttonNextTitle=p.buttonNextTitle||"Next",p.buttonPrevTitle=p.buttonPrevTitle||"Prev",p.month=T("date")(d,"MMMM"),p.monthNumber=Number(T("date")(d,"MM")),p.day=Number(T("date")(d,"dd")),p.dateWeekStartDay=p.validateWeekDay(p.dateWeekStartDay),p.dateMaxLimit?p.year=Number(T("date")(new Date(p.dateMaxLimit),"yyyy")):p.year=Number(T("date")(d,"yyyy")),p.months=h.MONTH,p.daysInString=[],n=p.dateWeekStartDay;n<=p.dateWeekStartDay+6;n+=1)p.daysInString.push(n%7);p.daysInString=p.daysInString.map(function(e){return T("date")(new Date(new Date("06/08/2014").valueOf()+864e5*e),"EEE")}),p.datepickerAppendTo&&-1!==p.datepickerAppendTo.indexOf(".")?(p.datepickerID="datepicker-id-"+(new Date).getTime()+(Math.floor(6*Math.random())+8),E.element(document.getElementsByClassName(p.datepickerAppendTo.replace(".",""))[0]).append($(E.element(v))(p,function(e){a=E.element(e)[0]}))):p.datepickerAppendTo&&-1!==p.datepickerAppendTo.indexOf("#")?(p.datepickerID="datepicker-id-"+(new Date).getTime()+(Math.floor(6*Math.random())+8),E.element(document.getElementById(p.datepickerAppendTo.replace("#",""))).append($(E.element(v))(p,function(e){a=E.element(e)[0]}))):p.datepickerAppendTo&&"body"===p.datepickerAppendTo?(p.datepickerID="datepicker-id-"+((new Date).getTime()+(Math.floor(6*Math.random())+8)),E.element(document).find("body").append($(E.element(v))(p,function(e){a=E.element(e)[0]}))):(o.after($(E.element(v))(p)),a=e[0].querySelector("._720kb-datepicker-calendar")),(!p.datepickerToggle||p.$eval(p.datepickerToggle))&&o.on("focus click focusin",function(){f=!0,m||f||!a?(i=C.document.getElementsByClassName("_720kb-datepicker-calendar"),E.forEach(i,function(e,t){i[t].classList?i[t].classList.remove("_720kb-datepicker-open"):P(i[t],"_720kb-datepicker-open")}),a.classList?a.classList.add("_720kb-datepicker-open"):M(a,"_720kb-datepicker-open")):p.hideCalendar()}),o.on("focusout blur",function(){f=!1}),E.element(a).on("mouseenter",function(){m=!0}),E.element(a).on("mouseleave",function(){m=!1}),E.element(a).on("focusin",function(){m=!0}),E.element(C).on("click focus focusin",b),(p.dateMinLimit&&!p.isSelectableMinYear(p.year)||!p.isSelectableMinDate(p.year+"/"+p.monthNumber+"/"+p.day))&&y(),(p.dateMaxLimit&&!p.isSelectableMaxYear(p.year)||!p.isSelectableMaxDate(p.year+"/"+p.monthNumber+"/"+p.day))&&w(),p.paginateYears(p.year),k(p.monthNumber,p.year),p.checkVisibility=function(){return!!p.datepickerShow&&p.$eval(p.datepickerShow)},p.$on("$destroy",function(){S(),D(),N(),x(),o.off("focus click focusout blur"),E.element(a).off("mouseenter mouseleave focusin"),E.element(C).off("click focus focusin",b)})}}}])}(angular,navigator);var filamentui=angular.module("filamentui",["filamentuiTemplates","tw.directives.clickOutside","angularUtils.directives.dirPagination","720kb.datepicker"]);angular.module("filamentui").directive("filamentuiItemGenerator",["$compile","$rootScope",function(o,e){return{scope:{type:"=",data:"=",event:"="},link:function(i,n){var r="";function a(){for(key in r='<div class="generated-class" '+i.type,i.data){var e=i.data[key],t=(a=e,JSON.stringify(a).replace(/\\n/g,"\\n").replace(/\'/g,"&#39;").replace(/\\"/g,'\\"').replace(/\\&/g,"\\&").replace(/\\r/g,"\\r").replace(/\\t/g,"\\t").replace(/\\b/g,"\\b").replace(/\\f/g,"\\f"));r+=" "+key+"='"+t+"' "}var a;r+="></div>",angular.element(".generated-class",n).remove(),n.append(o(r)(i))}e.$on(i.event,function(){a()}),i.$watch("data",function(e,t){e&&e!==t&&a()}),a()}}}]),angular.module("filamentui").directive("filamentuiActivity",["$rootScope",function(n){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"filamentui/directives/activity/activity.html",scope:{activities:"="},link:function(a,e,t,i){a.showAll=!1,a.updateEvent="activity_"+(new Date).getTime()+"_"+Math.ceil(100*Math.random()),a.orderDescriptionKeys=["A - Z","Z - A"],a.orderTimestampKeys=["Most Recent","Oldest"],a._fromNow=function(e){return moment(e).fromNow()},a._toggleViewMore=function(){a.showAll=!a.showAll},a._click=function(){a.activities.action&&"function"==typeof a.activities.action.click&&a.activities.action.click()},n.$on(a.updateEvent,function(e,t){a.activities=t})}}}]),angular.module("filamentui").directive("filamentuiBack",[function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"filamentui/directives/back/back.html",scope:{label:"=",back:"&?"},link:function(e,t,a,i){e._back=function(){null!=e.back&&e.back()}}}}]),angular.module("filamentui").directive("filamentuiButton",["$timeout","$q",function(i,n){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"filamentui/directives/button/button.html",scope:{click:"&?",options:"=",openOnSelectOption:"=",position:"=",size:"=?"},link:function(a,e,t){a._isPlus=e.hasClass("plus"),a.selectedMenu=null,a.menuIcon=null,a.lastClick=null,a.processing=!1,a.disabledClass="",a.loadingIconColour="#fff",e.hasClass("delete")?a.loadingIconColour="#d0021b":e.hasClass("info")&&(a.loadingIconColour="#31708F"),t.$observe("disabled",function(e,t){void 0!==e&&e!==t&&(a.disabledClass=e?"disabled":"")}),a._toggleOptions=function(e){e&&(e.stopPropagation(),e.preventDefault()),a._disabled()||(a.displayOptions=!a.displayOptions)},a._closeOptions=function(){a.displayOptions=!1},a._clickMenu=function(e){a.selectedMenu=e,a.menuIcon=a.selectedMenu.icon,a.selectedOption=a.selectedMenu.title,a.displayOptions=!1,(a._isPlus||a.openOnSelectOption&&a.openOnSelectOption)&&e.action()},a._click=function(){function e(e){e&&(a.processing=!0,n.when(e).then(function(e){a.processing=!1},function(){a.processing=!1}))}a._disabled()||a.processing||(a.selectedMenu?e(a.selectedMenu.action()):!a.selectedOption&&a.options?a._toggleOptions():a.click&&i(function(){e(a.click())},100))},a._disabled=function(){return e.hasClass("disabled")}}}}]),angular.module("filamentui").directive("filamentuiCard",[function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"filamentui/directives/card/card.html",scope:{model:"=",showRatings:"=",flip:"=?"},link:function(t,e,a){t.flip=!!t.flip&&t.flip,t._imgSrc=function(){var e="";return t.model.imageName&&(e+="filamentui/assets/img/"+t.model.imageName),e}}}}]).filter("concat",function(){return function(e){return e?e.split(",").join(", "):"None"}}).filter("currency",function(){return function(e){return 0===e||"0"===e?"FREE":"£"+e}}).filter("modelTaggingType",function(){function t(e){return"DOCUMENT"===e||"SENTENCE"===e||"WORD"===e?"NLP "+e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()+" Model":e}return function(e){return Array.isArray(e)?e.map(t):t(e)}}),angular.module("filamentui").directive("filamentuiCardContainer",[function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"filamentui/directives/cards/cards.html",scope:{cards:"=",actions:"=",heading:"=",showRatings:"=",onPageChange:"=",options:"=",pagerId:"=",filterBy:"=",orderBy:"=",addTitle:"=?"},link:function(n,e,t){n.showAdd=!(null==n.addTitle),n.addCard={category:"add",description:n.addTitle},n.pagination={currentPage:1,_totalItems:0,perPage:n.options&&n.options.perpage?n.options.perpage:10},n.pagerOptions={perPage:n.pagination.perPage,directionLinks:!0,boundaryLinks:!0,onPageChange:function(e,t){i()},pagerId:n.pagerId,autoHide:n.options.autoHide};var a=function(){if(n.orderBy){var a,i="-"===n.orderBy.charAt(0);a=i?n.orderBy.slice(1):n.orderBy,n._cards=n._cards.sort(function(e,t){return i?e[a]<t[a]?1:-1:e[a]>t[a]?1:-1})}};function i(){var e=n.pagination.currentPage*n.pagination.perPage;if("function"==typeof n.cards)n.cards({start:e,perpage:n.pagination.perPage?n.pagination.perPage:n.pagination._totalItems}).then(function(e){n._cards=angular.copy(e.data),a(),n.pagination._totalItems=e.count;angular.copy(e.data)});else{n._cards=angular.copy(n.cards),a(n._cards),e=(n.pagination.currentPage-1)*n.pagination.perPage,n.pagination.perPage&&(n._cards=n._cards.splice(e,n.pagination.perPage)),n.pagination._totalItems=n.cards.length;angular.copy(n._cards)}}n._addClick=function(){if(n.actions&&1<n.actions.length){var e=n.actions[1];if(0<e.length){var t=e[0];null!=t.if?"function"==typeof t.if&&t.if()?t.action():"boolean"==typeof t.if&&t.if&&t.action():t.action()}}},n._cardClick=function(e){if(!e.loading&&n.actions&&0<n.actions.length){var t=n.actions[0];if(0<t.length){var a=t[0];null!=a.if?"function"==typeof a.if&&a.if(e)?a.action(e):"boolean"==typeof a.if&&a.if&&a.action(e):a.action(e)}}},n.$watch("cards",function(){i()}),n.$watch("pagerOptions.perPage",function(){n.pagination.perPage=n.pagerOptions.perPage}),n.$watch("orderBy",function(e,t){e&&e!==t&&i()})}}}]),angular.module("filamentui").directive("filamentuiCheckbox",[function(){return{restrict:"E",replace:!0,templateUrl:"filamentui/directives/checkbox/checkbox.html",require:"ngModel",scope:{label:"="},link:function(t,e,a,i){t._click=function(e){e.stopPropagation(),t._checked=!t._checked,i&&i.$setViewValue(t._checked)},i&&(i.$render=function(){t._checked=i.$viewValue})}}}]),angular.module("filamentui").directive("filamentuiDate",[function(){return{restrict:"AE",replace:!0,template:'<span class="filamentuiDate">{{ fromNow || timestamp | date : "dd/MM/yyyy" }}</span>',scope:{timestamp:"=",fromNow:"=?"},link:function(e,t,a){}}}]),angular.module("filamentui").directive("filamentuiDatetime",[function(){return{restrict:"AE",replace:!0,template:'<span class="filamentuiDatetime">{{ fromNow || timestamp | date : "dd/MM/yyyy hh:mm" }}</span>',scope:{timestamp:"=",fromNow:"=?"},link:function(e,t,a){}}}]),angular.module("filamentui").directive("filamentuiHelp",[function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"filamentui/directives/help/help.html",scope:{help:"&?"},link:function(e,t,a,i){e._help=function(){e.selected=!e.selected,null!=e.help&&e.help()}}}}]),angular.module("filamentui").directive("filamentuiFilter",["$timeout","$rootScope",function(e,o){function a(e,t,a){}function i(r,i,e){function n(e,t,a){a?(r.activeSort.sort="",delete r.activeSort.key,delete r.activeSort.asc):(r.sortFunction?r.activeSort.sort=r.sortFunction:r.activeSort.sort=e,r.activeSort.key=e,r.activeSort.asc=t),o.$emit(r.event),r.displayOptions=!1,angular.element("h5",i).removeClass("active")}r.asc=r.activeSort&&r.activeSort.asc||!1,r.displayOptions=!1,r._toggleOptions=function(){r.displayOptions=!r.displayOptions},r._filter=function(e,t){var a=t.title,i=r.key,n=t.value;a===r.activeFilter?(r.activeFilter=null,t.complexMatch?delete r.activeFilters.$:delete r.activeFilters[i]):(r.activeFilter=a,t.complexMatch?r.activeFilters.$=n:r.activeFilters[i]=n),o.$emit(r.event,t.strict),r.displayOptions=!1},r._closeFilter=function(){r.displayOptions=!1},r._shouldHideFilter=function(){return!r.displayOptions},r._sort=function(e,t){var a=r.activeSort.key===r.key&&r.activeSort.asc===t;r.asc=t,r._toggleOptions(),n(r.key,t,a)},r.activeSort&&r.activeSort.key===r.key&&n(r.activeSort.key,r.activeSort.asc,!1),r.filters&&r.filters.forEach(function(e){e.title||(e.title=e.value)})}return{restrict:"E",replace:!0,transclude:!0,templateUrl:"filamentui/directives/filter/filter.html",scope:{filterItems:"=",key:"=",event:"=",sorts:"=",sortFunction:"=",filters:"=",activeFilters:"=",activeSort:"="},compile:function(e,t){return{pre:a,post:i}}}}]),angular.module("filamentui").directive("filamentuiHeroBanner",[function(){return{restrict:"E",replace:!0,transclude:{one:"?paneOne",two:"?paneTwo",three:"?paneThree"},scope:{layout:"=",position:"=?",backImg:"=",backGrad:"=",title:"=",status:"=",description:"=",lastUpdated:"=?"},templateUrl:function(e,t){var a=t.layout;a&&(a=t.layout.split("'")[1]);return a?"filamentui/directives/herobanner/layout/"+a+".html":"filamentui/directives/herobanner/layout/basic.html"},link:function(t,e,a){var i;"two_column"!=t.layout||t.position||(t.position="right"),t.hidePane=function(e){return!(e==t.position)},i=a.backImg||"_img/hero-banner.jpg",a.backGrad||!a.backImg?e.css({background:"linear-gradient(rgba(255, 255, 255, 0.85),rgba(255, 255, 255, 0.85)), url("+i+")","background-size":"cover","background-position":"center"}):e.css({background:"url("+i+")","background-size":"cover","background-position":"center"})}}}]),angular.module("filamentui").directive("filamentuiIcon",[function(){return{restrict:"AE",replace:!0,transclude:!0,templateUrl:"filamentui/directives/icon/icon.html",scope:{status:"="},link:function(e,t,a){}}}]),angular.module("filamentui").directive("filamentuiInput",[function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"filamentui/directives/input/input.html",scope:{name:"=",required:"=",label:"=",placeholder:"=",errorMessage:"=",infoMessage:"=",helpMessage:"=",rows:"=",options:"=",date:"=",readonly:"=",password:"=",disabled:"=",help:"&?",valid:"&?",size:"=?"},require:"ngModel",link:function(a,e,t,i){a.input={value:null},$scope_showHelpMessage=!1,a.originalValue=null,a.inputType="text",null!=a.password&&a.password&&(a.inputType="password"),a.readonlyClass="",a.readonlyState=!1,a.disabledClass="",a.disabledState=!1,t.$observe("readonly",function(e,t){void 0!==e&&e!==t&&(e?(a.readonlyClass="readonly",a.readonlyState=!0):a.readonlyClass="")}),t.$observe("disabled",function(e,t){void 0!==e&&e!==t&&(e?(a.disabledClass="disabled",a.disabledState=!0):a.disabledClass="")}),i.$render=function(){null!=i.$viewValue&&(a.input.value=i.$viewValue,null==a.originalValue&&(a.originalValue=angular.copy(a.input.value)))},a.onInputChange=function(){i.$setViewValue(a.input.value)},a.clearInput=function(){a.input.value=null,i.$setViewValue(a.input.value)},a._hasChanged=function(){return a.input.value&&""!==a.input.value},a._valid=function(){return null==a.valid||("function"==typeof a.valid?a.valid():a.valid)}}}}]),angular.module("filamentui").directive("filamentuiJson",[function(){return{restrict:"AE",replace:!0,transclude:!0,templateUrl:"filamentui/directives/json/json.html",scope:{json:"="},link:function(e,t,a,i){}}}]),angular.module("filamentui").directive("filamentuiLabel",[function(){return{restrict:"AE",replace:!0,templateUrl:"filamentui/directives/label/label.html",scope:{text:"=",labelclass:"="},link:function(e,t,a){}}}]),angular.module("filamentui").directive("filamentuiMenu",[function(){return{restrict:"E",replace:!0,templateUrl:"filamentui/directives/menu/menu.html",scope:{options:"=",position:"=",scope:"=",text:"="},link:function(i,t,e){i.displayOptions=!1,i._toggleOptions=function(e){e.preventDefault(),e.stopImmediatePropagation(),i.displayOptions=!i.displayOptions,angular.element(".menuButton",t).hasClass("active")?angular.element(".menuButton",t).removeClass("active"):angular.element(".menuButton",t).addClass("active")},i._clickMenu=function(e,t){e.preventDefault(),e.stopImmediatePropagation(),i.displayOptions=!1;var a=t;i.scope&&(a=i.scope),t.disabled&&t.disabled(i.scope)||t.action&&t.action(a)},i._showMenu=function(e,t){return!e.if||e.if(t)},i._showMenuGroup=function(e,t){var a=!1;return e.forEach(function(e){a=a||i._showMenu(e,t)}),a},i._disableMenu=function(e,t){return!!e.disabled&&e.disabled(t)},i._closeMenu=function(){i.displayOptions=!1,angular.element(".menuButton",t).removeClass("active")},i._shouldHideMenu=function(){return!i.displayOptions}}}}]),angular.module("filamentui").directive("filamentuiLoader",[function(){return{restrict:"E",replace:!0,templateUrl:"filamentui/directives/loader/loader.html",scope:{type:"=?",colour:"=?"},link:function(e,t,a){e.type=void 0===e.type?"wave":e.type}}}]),angular.module("filamentui").directive("filamentuiPager",[function(){function a(e,t,a){e.options||(e.options={perPage:10})}function i(t,e,a){for(p in t.hideMenu=t.total&&t.total>t.options.perPage,t.perPageOptions=[5,10,50],t.perPageTitle=n(),t.perPageMenu=[[]],t.perPageOptions){var i=t.perPageOptions[p];t.perPageMenu[0].push({title:i+" per page",perpage:i,action:function(e){t.options.perPage=e.perpage,t.perPageTitle=n()}})}function n(){return t.options.perPage+" per page"}}return{restrict:"AE",replace:!0,templateUrl:"filamentui/directives/pager/pager.html",scope:{options:"=",total:"="},compile:function(e,t){return{pre:a,post:i}}}}]),angular.module("filamentui").directive("filamentuiPills",[function(){return{restrict:"AE",replace:!0,templateUrl:"filamentui/directives/pills/pills.html",scope:{options:"="},require:"ngModel",link:function(t,e,a,i){t.selectedPill=null,i.$render=function(){if(i.$viewValue)for(var e=0;e<t.options.length;e++)t.options[e]==i.$viewValue&&(t.selectedPill=t.options[e])},i.$render(),t._click=function(e){e.click&&"function"==typeof e.click?null!=e.disabled&&"function"==typeof e.disabled&&e.disabled(e)||((t.selectedPill=e).click(e),i.$setViewValue(t.selectedPill)):null!=e.disabled&&"function"==typeof e.disabled&&e.disabled(e)||(t.selectedPill=e,i.$setViewValue(t.selectedPill))}}}}]),angular.module("filamentui").directive("filamentuiProgress",[function(){return{restrict:"AE",replace:!0,transclude:!0,templateUrl:"filamentui/directives/progress/progress.html",scope:{label:"=",progress:"=",background:"=?",options:"=?"},link:function(e,t,a,i){e.currentProgress=0,e._calcStyle=function(){var e=n();return{width:(e=(e=100<e?100:e)<0?0:e)+"%",background:r(e)}};var n=function(){return e.progress&&("function"==typeof e.progress?e.currentProgress=e.progress():e.currentProgress=e.progress),e.currentProgress},r=function(){return e.background?"function"==typeof e.background?e.currentProgress?e.background(e.currentProgress):e.background(0):e.background:"#27ae60"}}}}]),angular.module("filamentui").directive("quickLoadImg",[function(){return{restrict:"A",link:function(e,t,a){var i=a.quickLoadImg,n=t[0],r=new Image;r.src=i,r.onload=function(){var e='url("'+r.src+'"), -webkit-gradient(radial, 50% 15%, 20, 50% 15%, 1000, from(rgba(148, 78, 100, 0.952941)), to(rgba(0, 0, 0, 0.952941)))';n.style.background=e,n.style["background-size"]="cover",n.classList.add("loaded")}}}}]),angular.module("filamentui").directive("filamentuiRadio",["$rootScope",function(e){return{restrict:"E",replace:!0,templateUrl:"filamentui/directives/radio/radio.html",scope:{label:"="},require:"ngModel",link:function(t,e,a,i){t._click=function(e){e.stopPropagation(),t._checked=!t._checked,i&&i.$setViewValue(t._checked)},i&&(i.$render=function(){t._checked=i.$viewValue})}}}]),angular.module("filamentui").directive("filamentuiStarRating",[function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"filamentui/directives/starrating/starrating.html",scope:{disabled:"=?"},require:"ngModel",link:function(t,e,a,i){t.stars=0,t._select=function(e){t.disabled||(i.$setViewValue(e),t.stars=e)},i.$render=function(){null!=i.$viewValue&&(t.stars=i.$viewValue)}}}}]),angular.module("filamentui").directive("filamentuiSettings",[function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"filamentui/directives/settings/settings.html",scope:{settings:"&?"},link:function(e,t,a){e._settings=function(){null!=e.settings&&e.settings()}}}}]),angular.module("filamentui").directive("filamentuiStatistic",[function(){return{restrict:"E",replace:!0,scope:{title:"=",value:"=",colour:"="},templateUrl:"filamentui/directives/statistic/statistic.html"}}]),angular.module("filamentui").directive("filamentuiTab",function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"filamentui/directives/tab/tab.html",scope:{},require:"^filamentuiTabs",link:function(e,t,a,i){var n={name:a.name,index:a.index};i.register(n),e.isVisible=function(){return i.isActive(n.index)}}}}),angular.module("filamentui").directive("filamentuiTable",["$rootScope","$timeout",function(h,e){function a(e,t,a){e.options||(e.options={perPage:10}),e._tableRowIndex=e.tableRowIndex||0<=e.tableRowIndex?"_"+e.tableRowIndex:"",e.pagerId=e.pagerId+e._tableRowIndex}function i(r,e,t,a){var i={},n=[];function o(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()}function c(e){0==r.selected.length&&(r.selected=e.filter(function(e){return e._meta&&e._meta.checked}),g())}function l(){var e=(r.pagination.currentPage-1)*r.pagination.perPage;"function"==typeof r.rows?(params={top:r.pagination.perPage,skip:e,orderBy:r.activeSort.key,orderType:r.activeSort.asc?"asc":"desc"},r.rows(params).then(function(e){r._rows=angular.copy(e.items),r.pagination._totalItems=e.count;var t=[];r.cols.forEach(function(e){e.type&&t.push({type:e.type,key:e.key})}),r._rows.forEach(function(a,e){a._filamentui_id=e,0<t.length&&t.forEach(function(e){if(void 0!==a[e.key]){var t={};switch(e.type){case"date":t={type:"filamentui-date",data:{timestamp:a[e.key]}};break;case"datetime":t={type:"filamentui-datetime",data:{timestamp:a[e.key]}}}a[e.key]=t}})}),c(r._rows)})):(r._rows=angular.copy(r.rows),r._rows.forEach(function(e,t){e._meta=e._meta?e._meta:{},void 0!==i[e.id]&&null!==i[e.id]&&(e._meta.checked=i[e.id]),e._filamentui_id=t}),s(),r._rows=r._rows.filter(function(e){var t=!1,n=function(e,t){for(var a in e)if(e.hasOwnProperty(a)){var i=e[a];if("object"==typeof i){if(n(i,t))return!0}else if(i===t)return!0}return!1};if(r.activeFilters.$){if(t=!0,n(e,r.activeFilters.$))return!0}else for(var a in r.activeFilters)if(r.activeFilters.hasOwnProperty(a)){t=!0;var i=r.activeFilters[a];if(e[a]===i)return!0}return!t||!1}),r.pagination._totalItems=r._rows.length,e=(r.pagination.currentPage-1)*r.pagination.perPage,r._rows=r._rows.splice(e,r.pagination.perPage),c(r._rows))}r.activeFilters={},r.activeSort=r.options.defaultSort?r.options.defaultSort:{},r.clickActionIndex=r.options.clickActionIndex,r.tableId=r.$id,r.selected=[],r.selectedCount=0,r.event="table_"+o(),r.igEvent="table_"+o(),r.allChecked=!1,r.pagination={currentPage:1,_totalItems:0,perPage:r.options.perPage?r.options.perPage:10},r.pagerOptions={perPage:r.pagination.perPage,directionLinks:!0,boundaryLinks:!0,onPageChange:function(e,t){r.options.multiple&&(0<r.selected.length&&(n[t]=angular.copy(r.selected)),e<=n.length+1&&(n[e]?r.selected=n[e]:r.selected=[],g()));l()},pagerId:r.pagerId+"_pgid",autoHide:"boolean"!=typeof r.options.autoHide||r.options.autoHide},r.showActions=function(t){var a=0;r.actions&&r.actions.forEach(function(e){e.forEach(function(e){e.if&&!e.if(t)||a++})});return 0<a},r._clickClass=function(e){{if(u(e))return"clickable";if(d(e))return"expandable"}},r._clickAction=function(e){if(u(e)){var t=r.actions[0],a=t[r.clickActionIndex];a.action(e)}else d(e)?e.expanded=!e.expanded:r.options&&r.options.multiple?(p(e,!e._meta||!e._meta.checked),r._updateSelected(e)):r.options&&r.options.selectable&&r._radioUpdated(e)},r._tableDimensions=function(){var e="";r.options&&r.options.selectable&&(e+="50px ");for(var t=0;t<r.cols.length;t++)e+=r.cols[t].width+" ";(r.actions||r.options.expandable)&&(e+="50px ");return e},r._filterProperties=function(e){for(var t={},a=0;a<r.cols.length;a++)t[r.cols[a].key]=e[r.cols[a].key];return t},r._updatedSubTable=function(e,t){var a;r._rows.forEach(function(e){e._filamentui_id===t&&(a=e)}),m(a)&&(a.expandedContent.data.selected&&0<a.expandedContent.data.selected.length)&&p(a,!0);a.expandedContent.data.rows=e,r._updateSelected(a,!0)},r._updateSelected=function(e,t){var a=e._meta&&e._meta.checked;!t&&m(e)&&f([e],a);r.selected=r._rows.filter(function(e){var t=e._meta&&e._meta.checked;return i[e.id]=t}),g(),r.onChange&&r.onChange(r._rows,r.parentRowIndex)},r._radioUpdated=function(t){var e=t._meta&&t._meta.checked;r.selected=e?[t]:[],r._rows.forEach(function(e){e.id!==t.id&&delete e._meta}),(i={})[t.id]=e,g()},r._checkAll=function(){r.allChecked=!r.allChecked,r.selected=[],r.selected=f(r._rows,r.allChecked),g()};var s=function(){r._rows=r._rows.sort(function(e,t){var a,i;return r.activeSort.sort&&"function"==typeof r.activeSort.sort?(a=r.activeSort.sort(e),i=r.activeSort.sort(t)):(a=e[r.activeSort.key],i=t[r.activeSort.key]),a<i?r.activeSort.asc?-1:1:i<a?r.activeSort.asc?1:-1:0})};function u(e){var t=!1,a=r.clickActionIndex;if(null!=a&&r.actions&&0<r.actions.length){var i=r.actions[0];if(0<i.length){var n=i[a];t=null==n.if||("function"==typeof n.if&&n.if(e)||"boolean"==typeof n.if&&n.if)}}return t}function d(e){return r.options&&r.options.expandable}function p(e,t){t?e._meta={checked:t}:delete e._meta}function m(e){return e.expandedContent&&"filamentui-table"===e.expandedContent.type}var f=function(e,a){var i=[];return e.forEach(function(e){if(a?(e._meta=e._meta?e._meta:{},e._meta.checked=a):delete e._meta,m(e)){var t=f(e.expandedContent.data.rows,a);e.expandedContent.data.selected=t}a&&i.push(e)}),i};function g(){if(a)if(r.options.multiple){n[r.pagination.currentPage]=r.selected;var e=n.reduce(function(e,t){return e.concat(t)},[]);r.selectedCount=e.length,a.$setViewValue(e)}else r.selectedCount=r.selected.length,a.$setViewValue(r.selected)}h.$on(r.event,function(e,t){t&&(r.strictFilter=t),l()}),h.$on("refresh_table",function(){l()}),r.$watch("rows",function(e,t){e&&e!==t&&l()},!0),r.$watch("pagerOptions.perPage",function(e,t){e&&e!==t&&(r.pagination.perPage=r.pagerOptions.perPage)}),r.$watch("options",function(e,t){if(e&&e!==t&&(r.selected=[],g(),r._rows))for(var a=0;a<r._rows.length;a++)null!=r._rows[a]._meta&&r._rows[a]._meta.checked&&(r._rows[a]._meta.checked=!1)}),l()}return{restrict:"E",replace:!0,templateUrl:"filamentui/directives/table/table.html",scope:{rows:"=",cols:"=",actions:"=?",options:"=?",pagerId:"=?",onChange:"=?",parentRowIndex:"=?",tableRowIndex:"=?",required:"=?",errorMessage:"=?"},require:"?ngModel",compile:function(e,t){return{pre:a,post:i}}}}]),angular.module("filamentui").directive("filamentuiTags",[function(){return{restrict:"AE",replace:!0,transclude:!0,templateUrl:"filamentui/directives/tags/tags.html",scope:{tags:"=",top:"=?"},link:function(e,t,a,i){e.showAll=!0,e.topTags=[],e.moreTags=[],e.showTags=!1,e._showMore=function(){e.showTags=!0},e._showLess=function(){e.showTags=!1},e.tagColour=function(e){return{background:e.colour}},e.top&&"number"==typeof e.top&&(e.showAll=!1,e.topTags=e.tags.slice(0,e.top),e.moreTags=e.tags.slice(e.top,e.tags.length))}}}]),function(){function e(i){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"filamentui/directives/tabs/tabs.html",scope:{position:"="},link:function(e,t,a){e.switch=function(e){i.setOpenTab(e.index)}},controller:t}}function t(t,a){t.tabs=[],this.register=function(e){t.tabs.push(e)},this.isActive=function(e){return a.getOpenTab()==e},t.isActive=this.isActive,a._init()}e.$inject=["tabService"],t.$inject=["$scope","tabService"],angular.module("filamentui").directive("filamentuiTabs",e).controller("TabsController",t)}(),angular.module("filamentui").factory("tabService",function(){return _tabState={openTabIndex:0},{_init:function(){_tabState.openTabIndex=0},setOpenTab:function(e){_tabState.openTabIndex=e},getOpenTab:function(e){return _tabState.openTabIndex}}}),angular.module("filamentui").directive("filamentuiDataset",[function(){return{restrict:"AE",replace:!0,templateUrl:"filamentui/directives/types/dataset.html",scope:{title:"=",description:"="},link:function(e,t,a){}}}]),angular.module("filamentui").directive("filamentuiTag",[function(){return{restrict:"AE",replace:!0,templateUrl:"filamentui/directives/types/tag.html",scope:{title:"=",description:"="},link:function(e,t,a){}}}]),angular.module("filamentui").directive("filamentuiTagger",[function(){return{restrict:"AE",replace:!0,templateUrl:"filamentui/directives/types/tagger.html",scope:{title:"=",description:"="},link:function(e,t,a){}}}]),angular.module("filamentui").directive("filamentuiVersion",[function(){return{restrict:"AE",replace:!0,templateUrl:"filamentui/directives/types/version.html",scope:{title:"=",description:"="},link:function(e,t,a){}}}]),angular.module("filamentui").directive("filamentuiWorkspace",[function(){return{restrict:"AE",replace:!0,templateUrl:"filamentui/directives/types/workspace.html",scope:{title:"=",description:"="},link:function(e,t,a){}}}]),angular.module("filamentui").directive("filamentuiRoleCard",[function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"filamentui/directives/card/rolecard/rolecard.html",scope:{card:"=",click:"=",selectedId:"=",information:"=?"},link:function(t,e,a){t._click=function(e){"function"==typeof t.click&&t.click(e)},t._information=function(e){t.information&&"function"==typeof t.information&&t.information(e)},t._cardClasses=function(){var e="";return t.card.tag&&(e+="role-card-"+t.card.tag.toLowerCase()),t.selectedId===t.card.id&&(e+=" selected"),e},t._imgSrc=function(){var e="";return t.card.svg?e+="filamentui/assets/img/"+t.card.svg:t.card.img&&(e+=t.card.img),e}}}}]),angular.module("filamentui").directive("filamentuiRoleCardContainer",[function(){return{restrict:"E",replace:!0,templateUrl:"filamentui/directives/cards/rolecards/rolecards.html",scope:{cards:"=",information:"=?"},require:"ngModel",link:function(e,t,a,i){e._updateSelected=function(e){i.$setViewValue(e),i.$render()},i.$render=function(){i.$viewValue&&(e.selected=i.$viewValue.id)}}}}]);